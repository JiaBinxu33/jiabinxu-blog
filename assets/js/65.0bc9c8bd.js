(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{386:function(a,s,t){"use strict";t.r(s);var e=t(27),r=Object(e.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"实训平台-dify-全流程部署详细笔记"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#实训平台-dify-全流程部署详细笔记"}},[a._v("#")]),a._v(" 实训平台 + Dify 全流程部署详细笔记")]),a._v(" "),s("blockquote",[s("p",[a._v("本文档详细记录了从本地环境准备到服务器部署、环境配置、端口开放、服务启动、模型接入等完整流程，适用于 ShiXunPlatForm-Web（前端）、ShiXunPlatform（后端）、ShiXunDify（Dify 智能体平台）等项目的搭建。请根据实际域名、密钥等进行相应替换。")])]),a._v(" "),s("hr"),a._v(" "),s("h2",{attrs:{id:"_1-连接到服务器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-连接到服务器"}},[a._v("#")]),a._v(" 1. 连接到服务器")]),a._v(" "),s("h3",{attrs:{id:"本机生成-ssh-密钥"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#本机生成-ssh-密钥"}},[a._v("#")]),a._v(" 本机生成 SSH 密钥")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("ssh-keygen "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" rsa "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-b")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("4096")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-C")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"your_email@example.com"')]),a._v("\n")])])]),s("ul",[s("li",[s("code",[a._v("-t")]),a._v(" 指定密钥类型（一般为 rsa 或 ed25519）。")]),a._v(" "),s("li",[s("code",[a._v("-b")]),a._v(" 指定密钥长度（RSA 推荐 4096 位）。")]),a._v(" "),s("li",[s("code",[a._v("-C")]),a._v(" 注释，建议填写邮箱。")])]),a._v(" "),s("p",[a._v("执行该命令后，程序会提示：")]),a._v(" "),s("ul",[s("li",[s("strong",[a._v("Enter file in which to save the key")]),a._v("：直接回车使用默认路径（如"),s("code",[a._v("~/.ssh/id_rsa")]),a._v("），也可自定义路径。")]),a._v(" "),s("li",[s("strong",[a._v("Enter passphrase")]),a._v("：建议设置密码短语，增强私钥安全性。")])]),a._v(" "),s("p",[a._v("命令执行完后，会在指定路径生成：")]),a._v(" "),s("ul",[s("li",[a._v("私钥：如 "),s("code",[a._v("id_rsa")])]),a._v(" "),s("li",[a._v("公钥：如 "),s("code",[a._v("id_rsa.pub")])])]),a._v(" "),s("h3",{attrs:{id:"将公钥发送给服务器管理员"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#将公钥发送给服务器管理员"}},[a._v("#")]),a._v(" 将公钥发送给服务器管理员")]),a._v(" "),s("p",[a._v("管理员将你的公钥内容加到服务器的 "),s("code",[a._v("~/.ssh/authorized_keys")]),a._v(" 文件中。")]),a._v(" "),s("h3",{attrs:{id:"测试连接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#测试连接"}},[a._v("#")]),a._v(" 测试连接")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ssh")]),a._v(" ubuntu@"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("your-server-ip"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),s("p",[a._v("如有多个 SSH 密钥，指定私钥连接：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ssh")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" ~/.ssh/"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("your-key-name"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" ubuntu@"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("your-server-ip"),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),s("hr"),a._v(" "),s("h2",{attrs:{id:"_2-代码拉取"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-代码拉取"}},[a._v("#")]),a._v(" 2. 代码拉取")]),a._v(" "),s("h3",{attrs:{id:"dify-代码拉取-服务器端"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dify-代码拉取-服务器端"}},[a._v("#")]),a._v(" Dify 代码拉取（服务器端）")]),a._v(" "),s("ol",[s("li",[s("strong",[a._v("生成服务器 SSH 密钥")]),a._v("（如未配置过）:"),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("ssh-keygen "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" ed25519 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-C")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"your_email@example.com"')]),a._v("\n")])])])]),a._v(" "),s("li",[s("strong",[a._v("把公钥加到 GitHub 账户/仓库 Deploy Keys")]),a._v(":"),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cat")]),a._v(" ~/.ssh/id_ed25519.pub\n")])])])]),a._v(" "),s("li",[s("strong",[a._v("测试 GitHub 连接:")]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ssh")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-T")]),a._v(" git@github.com\n")])])])]),a._v(" "),s("li",[s("strong",[a._v("克隆 Dify 仓库代码（dev 分支）:")]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" clone "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-b")]),a._v(" dev git@github.com:XZXY-AI/ShiXunDify.git\n")])])])])]),a._v(" "),s("h3",{attrs:{id:"实训平台代码拉取"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#实训平台代码拉取"}},[a._v("#")]),a._v(" 实训平台代码拉取")]),a._v(" "),s("ul",[s("li",[a._v("前端："),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" clone "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-b")]),a._v(" dev git@github.com:XZXY-AI/ShiXunPlatForm-Web.git\n")])])])]),a._v(" "),s("li",[a._v("后端："),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("git")]),a._v(" clone "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-b")]),a._v(" dev git@github.com:XZXY-AI/ShiXunPlatform.git\n")])])])])]),a._v(" "),s("blockquote",[s("p",[a._v("如遇到用户名密码问题，请确保 SSH Key 配置无误。")])]),a._v(" "),s("hr"),a._v(" "),s("h2",{attrs:{id:"_3-部署准备工作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-部署准备工作"}},[a._v("#")]),a._v(" 3. 部署准备工作")]),a._v(" "),s("h3",{attrs:{id:"_3-1-前端环境准备"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-前端环境准备"}},[a._v("#")]),a._v(" 3.1 前端环境准备")]),a._v(" "),s("h4",{attrs:{id:"nvm-管理-node"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nvm-管理-node"}},[a._v("#")]),a._v(" nvm 管理 Node")]),a._v(" "),s("ul",[s("li",[a._v("安装 nvm："),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.7/install.sh "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("bash")]),a._v("\n")])])])]),a._v(" "),s("li",[a._v("重新加载配置文件：\n"),s("ul",[s("li",[a._v("bash: "),s("code",[a._v("source ~/.bashrc")])]),a._v(" "),s("li",[a._v("zsh: "),s("code",[a._v("source ~/.zshrc")])])])]),a._v(" "),s("li",[a._v("验证 nvm："),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("nvm "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--version")]),a._v("\n")])])])]),a._v(" "),s("li",[a._v("安装 Node（LTS）："),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("nvm "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--lts")]),a._v("\n")])])])]),a._v(" "),s("li",[a._v("验证 Node："),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("node")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v("\n")])])])])]),a._v(" "),s("h4",{attrs:{id:"安装-yarn、pnpm、pm2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装-yarn、pnpm、pm2"}},[a._v("#")]),a._v(" 安装 yarn、pnpm、pm2")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--global")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-g")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("pnpm")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-g")]),a._v(" pm2\n")])])]),s("ul",[s("li",[a._v("验证 pm2："),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("pm2 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--version")]),a._v("\n")])])])])]),a._v(" "),s("h4",{attrs:{id:"安装依赖"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装依赖"}},[a._v("#")]),a._v(" 安装依赖")]),a._v(" "),s("p",[a._v("切到前端目录：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" ShiXunPlatForm-Web\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--production")]),a._v("\n")])])]),s("hr"),a._v(" "),s("h3",{attrs:{id:"_3-2-certbot、docker、nginx-安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-certbot、docker、nginx-安装"}},[a._v("#")]),a._v(" 3.2 Certbot、Docker、Nginx 安装")]),a._v(" "),s("ul",[s("li",[s("strong",[a._v("安装 snap 核心和 Certbot:")]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" snap "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" core\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" snap refresh core\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" snap "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--classic")]),a._v(" certbot\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ln")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" /snap/bin/certbot /usr/bin/certbot\n")])])])]),a._v(" "),s("li",[s("strong",[a._v("安装 Docker:")]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" snap "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v("\n")])])])]),a._v(" "),s("li",[s("strong",[a._v("安装 Nginx:")]),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" nginx\nnginx "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v("\n")])])])])]),a._v(" "),s("hr"),a._v(" "),s("h3",{attrs:{id:"_3-3-配置环境变量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-配置环境变量"}},[a._v("#")]),a._v(" 3.3 配置环境变量")]),a._v(" "),s("h4",{attrs:{id:"前端环境变量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前端环境变量"}},[a._v("#")]),a._v(" 前端环境变量")]),a._v(" "),s("p",[a._v("进入 "),s("code",[a._v("ShiXunPlatForm-Web")]),a._v(" 目录，编辑 "),s("code",[a._v(".env.production")]),a._v("：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("nano")]),a._v(" .env.production\n")])])]),s("p",[a._v("内容示例（请替换为实际域名）：")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("NEXT_PUBLIC_API_BASE_URL=https://test1.xinzhiaigc.com\nNEXT_PUBLIC_API_APP_URL=https://test2.xinzhiaigc.com\n")])])]),s("p",[a._v("保存退出后可 "),s("code",[a._v("cat .env.production")]),a._v(" 验证。")]),a._v(" "),s("hr"),a._v(" "),s("h4",{attrs:{id:"后端环境变量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#后端环境变量"}},[a._v("#")]),a._v(" 后端环境变量")]),a._v(" "),s("ul",[s("li",[a._v("Python 版本需 3.10.12"),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" python3\npython3 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--version")]),a._v("\n")])])])]),a._v(" "),s("li",[a._v("安装 certbot 及 nginx 插件"),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("apt")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" certbot python3-certbot-nginx "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-y")]),a._v("\n")])])])])]),a._v(" "),s("p",[a._v("编辑 ShiXunPlatform 的 "),s("code",[a._v(".env")]),a._v(" 文件（请根据实际替换密钥、域名等）：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("cd")]),a._v(" ShiXunPlatform\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("nano")]),a._v(" .env\n")])])]),s("p",[a._v("内容参考你需求文档中的示例。")]),a._v(" "),s("hr"),a._v(" "),s("h4",{attrs:{id:"dify-环境变量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dify-环境变量"}},[a._v("#")]),a._v(" Dify 环境变量")]),a._v(" "),s("p",[a._v("在 "),s("code",[a._v("ShiXunDify/docker")]),a._v(" 下新建 "),s("code",[a._v(".env")]),a._v(" 文件，内容参照你的详细模板，并根据实际情况替换域名、密钥等。")]),a._v(" "),s("hr"),a._v(" "),s("h2",{attrs:{id:"_4-系统级-nginx-及-https-配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-系统级-nginx-及-https-配置"}},[a._v("#")]),a._v(" 4. 系统级 Nginx 及 HTTPS 配置")]),a._v(" "),s("h3",{attrs:{id:"获取-ssl-证书"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#获取-ssl-证书"}},[a._v("#")]),a._v(" 获取 SSL 证书")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" certbot "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--nginx")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" test1.xinzhiaigc.com "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" test2.xinzhiaigc.com\n")])])]),s("h3",{attrs:{id:"重新加载-nginx"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#重新加载-nginx"}},[a._v("#")]),a._v(" 重新加载 Nginx")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" nginx "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" systemctl reload nginx\n")])])]),s("h3",{attrs:{id:"配置自动续期"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置自动续期"}},[a._v("#")]),a._v(" 配置自动续期")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" certbot renew --dry-run\n")])])]),s("h3",{attrs:{id:"nginx-配置软连接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx-配置软连接"}},[a._v("#")]),a._v(" Nginx 配置软连接")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ln")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-s")]),a._v(" /etc/nginx/sites-available/shixunPlatform-web /etc/nginx/sites-enabled/\n")])])]),s("h3",{attrs:{id:"nginx-配置示例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx-配置示例"}},[a._v("#")]),a._v(" Nginx 配置示例")]),a._v(" "),s("p",[a._v("编辑 "),s("code",[a._v("/etc/nginx/sites-available/shixunPlatform-web")]),a._v("（注意替换域名、路径等）：")]),a._v(" "),s("div",{staticClass:"language-nginx extra-class"},[s("pre",{pre:!0,attrs:{class:"language-nginx"}},[s("code",[s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("server")])]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("server_name")]),a._v(" test1.xinzhiaigc.com test2.xinzhiaigc.com")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("set")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$project_root")]),a._v(" /home/ubuntu/ShiXunPlatForm-Web")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("client_max_body_size")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("50M")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("location")]),a._v(" /api/")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("if")]),a._v(" ("),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$host")]),a._v(" = "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"test1.xinzhiaigc.com"')]),a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("set")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$target_upstream_static")]),a._v(" http://127.0.0.1:8000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("if")]),a._v(" ("),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$host")]),a._v(" = "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"test2.xinzhiaigc.com"')]),a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("set")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$target_upstream_static")]),a._v(" http://127.0.0.1:3000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("if")]),a._v(" ("),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$target_upstream_static")]),a._v(" = "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('""')]),a._v(")")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n            "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("return")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("404")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("proxy_pass")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$target_upstream_static")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("proxy_set_header")]),a._v(" Host "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$host")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("proxy_set_header")]),a._v(" X-Real-IP "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$remote_addr")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("proxy_set_header")]),a._v(" X-Forwarded-For "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$proxy_add_x_forwarded_for")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("proxy_set_header")]),a._v(" X-Forwarded-Proto "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$scheme")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("proxy_connect_timeout")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("60s")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("proxy_send_timeout")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("60s")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("proxy_read_timeout")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("60s")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("location")]),a._v(" /")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("proxy_pass")]),a._v(" http://127.0.0.1:3000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("proxy_set_header")]),a._v(" Host "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$host")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("proxy_set_header")]),a._v(" X-Real-IP "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$remote_addr")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("proxy_set_header")]),a._v(" X-Forwarded-For "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$proxy_add_x_forwarded_for")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("proxy_set_header")]),a._v(" X-Forwarded-Proto "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$scheme")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("ssl_dhparam")]),a._v(" /etc/letsencrypt/ssl-dhparams.pem")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("server")])]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("if")]),a._v(" ("),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$host")]),a._v(" = test2.xinzhiaigc.com)")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("return")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("301")]),a._v(" https://"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$host")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$request_uri")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("if")]),a._v(" ("),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$host")]),a._v(" = test1.xinzhiaigc.com)")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("return")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("301")]),a._v(" https://"),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$host")]),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$request_uri")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("listen")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("80")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("server_name")]),a._v(" test1.xinzhiaigc.com test2.xinzhiaigc.com")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token directive"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("return")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("404")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),s("hr"),a._v(" "),s("h2",{attrs:{id:"_5-端口开放"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-端口开放"}},[a._v("#")]),a._v(" 5. 端口开放")]),a._v(" "),s("p",[a._v("确保 3443、3000、3001 端口未被占用：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" ss "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-tulnp")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("':3443'")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" ss "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-tulnp")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("':3000'")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" ss "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-tulnp")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("':3001'")]),a._v("\n")])])]),s("hr"),a._v(" "),s("h2",{attrs:{id:"_6-启动服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6-启动服务"}},[a._v("#")]),a._v(" 6. 启动服务")]),a._v(" "),s("h3",{attrs:{id:"启动-dify"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动-dify"}},[a._v("#")]),a._v(" 启动 Dify")]),a._v(" "),s("p",[a._v("进入 "),s("code",[a._v("ShiXunDify/docker")]),a._v(" 目录：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker-compose")]),a._v(" up "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--build")]),a._v("\n")])])]),s("p",[a._v("验证 3000 端口是否监听：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" ss "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-tulnp")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("':3000'")]),a._v("\n")])])]),s("h3",{attrs:{id:"启动实训平台前端"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动实训平台前端"}},[a._v("#")]),a._v(" 启动实训平台前端")]),a._v(" "),s("p",[a._v("进入 "),s("code",[a._v("ShiXunPlatForm-Web")]),a._v(" 根目录：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" build\n"),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("PORT")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3001")]),a._v(" pm2 start "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("npm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"shixun-test"')]),a._v(" -- run start\n")])])]),s("p",[a._v("查看 pm2 状态：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("pm2 list\n")])])]),s("h3",{attrs:{id:"启动实训平台后端"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动实训平台后端"}},[a._v("#")]),a._v(" 启动实训平台后端")]),a._v(" "),s("p",[a._v("进入 ShiXunPlatform 目录：")]),a._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker-compose")]),a._v(" up "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--build")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v("\n")])])]),s("hr"),a._v(" "),s("h2",{attrs:{id:"_7-dify-配置要点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7-dify-配置要点"}},[a._v("#")]),a._v(" 7. Dify 配置要点")]),a._v(" "),s("ul",[s("li",[s("code",[a._v(".env")]),a._v(" 文件中的域名、端口、API、密钥需全部根据实际修改，如："),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('APP_WEB_URL=https://test2.xinzhiaigc.com\nNGINX_SERVER_NAME="test1.xinzhiaigc.com test2.xinzhiaigc.com"\nMAIN_SYSTEM_HOST=https://test1.xinzhiaigc.com\nMAIN_SYSTEM_ONLY_HOST=test1.xinzhiaigc.com\nAPP_SYSTEM_ONLY_HOST=test2.xinzhiaigc.com\n')])])])])]),a._v(" "),s("hr"),a._v(" "),s("h2",{attrs:{id:"_8-常见问题与排查"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_8-常见问题与排查"}},[a._v("#")]),a._v(" 8. 常见问题与排查")]),a._v(" "),s("ul",[s("li",[s("strong",[a._v("端口冲突")]),a._v("：如端口被占用，需先释放后再启动服务。")]),a._v(" "),s("li",[s("strong",[a._v("环境变量漏填")]),a._v("：务必每个 "),s("code",[a._v(".env")]),a._v(" 配置项都参考模版仔细填写。")]),a._v(" "),s("li",[s("strong",[a._v("域名解析未生效")]),a._v("：必须先完成 DNS 解析再申请证书和配置 nginx。")]),a._v(" "),s("li",[s("strong",[a._v("服务未启动或报错")]),a._v("：查看 "),s("code",[a._v("docker-compose logs")]),a._v("、"),s("code",[a._v("pm2 logs")]),a._v("、"),s("code",[a._v("nginx")]),a._v("/"),s("code",[a._v("certbot")]),a._v(" 日志排查。")])]),a._v(" "),s("hr"),a._v(" "),s("h2",{attrs:{id:"_9-附录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_9-附录"}},[a._v("#")]),a._v(" 9. 附录")]),a._v(" "),s("h3",{attrs:{id:"快速命令参考"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#快速命令参考"}},[a._v("#")]),a._v(" 快速命令参考")]),a._v(" "),s("ul",[s("li",[s("strong",[a._v("查看端口占用")]),a._v("："),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" ss "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-tulnp")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v("':端口号'")]),a._v("\n")])])])]),a._v(" "),s("li",[s("strong",[a._v("重启 nginx")]),a._v("："),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" systemctl reload nginx\n")])])])]),a._v(" "),s("li",[s("strong",[a._v("查看 pm2 列表")]),a._v("："),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("pm2 list\n")])])])]),a._v(" "),s("li",[s("strong",[a._v("docker-compose 启动")]),a._v("："),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker-compose")]),a._v(" up "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--build")]),a._v("\n")])])])])]),a._v(" "),s("hr")])}),[],!1,null,null,null);s.default=r.exports}}]);