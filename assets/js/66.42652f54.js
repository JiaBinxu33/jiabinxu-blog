(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{388:function(v,_,t){"use strict";t.r(_);var o=t(27),e=Object(o.a)({},(function(){var v=this,_=v._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[_("h1",{attrs:{id:"flutter环境配置与踩坑总结"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#flutter环境配置与踩坑总结"}},[v._v("#")]),v._v(" flutter环境配置与踩坑总结")]),v._v(" "),_("h2",{attrs:{id:"第一阶段-安装与环境配置"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#第一阶段-安装与环境配置"}},[v._v("#")]),v._v(" 第一阶段：安装与环境配置")]),v._v(" "),_("p",[v._v("这个阶段的目标是让您的电脑认识 Flutter 和 Android 的所有命令行工具。")]),v._v(" "),_("ol",[_("li",[_("strong",[v._v("您需要做什么：")]),v._v(" 准备 Flutter 和 Android 的开发环境。\n"),_("ul",[_("li",[_("strong",[v._v("遇到的第一个错误：")]),v._v(" "),_("code",[v._v("avdmanager is missing")]),v._v(" (缺少安卓虚拟设备管理器)。\n"),_("ul",[_("li",[_("strong",[v._v("原因：")]),v._v(" 您的 Android SDK 安装不完整，缺少了核心的“命令行工具”组件。")]),v._v(" "),_("li",[_("strong",[v._v("解决方案：")]),v._v(" 在 Android Studio 的 "),_("strong",[v._v("SDK Manager -> SDK Tools")]),v._v(" 选项卡中，勾选并安装 "),_("strong",[v._v("Android SDK Command-line Tools")]),v._v("。")])])]),v._v(" "),_("li",[_("strong",[v._v("遇到的第二个错误：")]),v._v(" "),_("code",[v._v("Unable to find suitable Visual Studio toolchain")]),v._v(" (找不到 VS 工具)。\n"),_("ul",[_("li",[_("strong",[v._v("原因：")]),v._v(" 您尝试在 Windows 平台运行 App，但这需要 C++ 的编译环境，而您没有安装对应的 Visual Studio 组件。")]),v._v(" "),_("li",[_("strong",[v._v("解决方案：")]),v._v(" 运行 "),_("strong",[v._v("Visual Studio Installer")]),v._v("，选择“修改”，然后勾选并安装 "),_("strong",[v._v("“使用 C++ 的桌面开发”")]),v._v(" 工作负载。")])])]),v._v(" "),_("li",[_("strong",[v._v("遇到的第三个错误：")]),v._v(" "),_("code",[v._v("flutter doctor")]),v._v(" 提示 "),_("code",[v._v("Some Android licenses not accepted")]),v._v(" (安卓许可证未接受)。\n"),_("ul",[_("li",[_("strong",[v._v("原因：")]),v._v(" 您还没有同意 Android SDK 的用户协议。")]),v._v(" "),_("li",[_("strong",[v._v("解决方案：")]),v._v(" 在终端中运行 "),_("code",[v._v("flutter doctor --android-licenses")]),v._v(" 命令，然后一路输入 "),_("code",[v._v("y")]),v._v(" 同意所有协议。")])])])])])]),v._v(" "),_("h2",{attrs:{id:"第二阶段-创建项目与首次编译"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#第二阶段-创建项目与首次编译"}},[v._v("#")]),v._v(" 第二阶段：创建项目与首次编译")]),v._v(" "),_("p",[v._v("这是最容易出错的阶段，核心问题都围绕着 "),_("strong",[v._v("Gradle 构建系统")]),v._v(" 和 "),_("strong",[v._v("网络环境")]),v._v("。")]),v._v(" "),_("ol",[_("li",[_("strong",[v._v("您需要做什么：")]),v._v(" 创建一个新 Flutter 项目并尝试在模拟器上运行它。\n"),_("ul",[_("li",[_("strong",[v._v("遇到的第一个错误：")]),v._v(" 编译时卡住不动，最后报出 "),_("code",[v._v("java.net.SocketException")]),v._v(" (网络连接超时)。\n"),_("ul",[_("li",[_("strong",[v._v("原因：")]),v._v(" 项目的构建工具 Gradle 需要从国外的官方服务器下载依赖，但您的网络环境访问这些服务器非常缓慢或不稳定。")]),v._v(" "),_("li",[_("strong",[v._v("解决方案：")]),v._v(" "),_("strong",[v._v("配置国内镜像源")]),v._v("。我们修改了项目中的 "),_("code",[v._v("android/build.gradle.kts")]),v._v(" 和 "),_("code",[v._v("android/settings.gradle.kts")]),v._v(" 文件，将下载地址从 "),_("code",[v._v("google()")]),v._v(" 和 "),_("code",[v._v("mavenCentral()")]),v._v(" 替换为了速度更快的阿里云镜像。")])])]),v._v(" "),_("li",[_("strong",[v._v("遇到的第二个错误：")]),v._v(" 修改镜像后，报出 "),_("code",[v._v("Unexpected tokens")]),v._v(" 或 "),_("code",[v._v("Plugin ... not found")]),v._v(" 等语法和插件版本错误。\n"),_("ul",[_("li",[_("strong",[v._v("原因：")]),v._v(" "),_("ol",[_("li",[v._v("最初的镜像配置语法不兼容您项目的 Kotlin 脚本 ("),_("code",[v._v(".kts")]),v._v(") 文件。")]),v._v(" "),_("li",[v._v("在修改过程中，可能不小心将安卓插件版本号改为了一个不存在的 "),_("code",[v._v("8.9.1")]),v._v("。")])])]),v._v(" "),_("li",[_("strong",[v._v("解决方案：")]),v._v(" "),_("ol",[_("li",[v._v("为您提供了适用于 "),_("code",[v._v(".kts")]),v._v(" 文件的正确语法 ("),_("code",[v._v('url = uri("...")')]),v._v(")。")]),v._v(" "),_("li",[v._v("最终我们通过"),_("strong",[v._v("创建一个全新的干净项目")]),v._v("来查找官方推荐的正确版本号，再把它复制回您的项目中，从而解决了版本错误问题。")])])])])]),v._v(" "),_("li",[_("strong",[v._v("遇到的第三个错误：")]),v._v(" "),_("code",[v._v("Your project path contains non-ASCII characters")]),v._v(" (项目路径含中文字符)。\n"),_("ul",[_("li",[_("strong",[v._v("原因：")]),v._v(" 您的项目存放在了 "),_("code",[v._v("D:\\web前端\\")]),v._v(" 目录下，Windows 上的安卓构建工具无法处理路径中的中文。")]),v._v(" "),_("li",[_("strong",[v._v("解决方案：")]),v._v(" 将项目移动到一个"),_("strong",[v._v("纯英文")]),v._v("的路径下（例如 "),_("code",[v._v("D:\\web_frontend\\")]),v._v("），彻底解决了这个问题。")])])])])])]),v._v(" "),_("h2",{attrs:{id:"第三阶段-编码与调试"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#第三阶段-编码与调试"}},[v._v("#")]),v._v(" 第三阶段：编码与调试")]),v._v(" "),_("p",[v._v("成功运行 App 后，您开始尝试修改代码并理解其工作原理。")]),v._v(" "),_("ol",[_("li",[_("strong",[v._v("您需要做什么：")]),v._v(" 学习基础语法，修改 App 内容并查看效果。\n"),_("ul",[_("li",[_("strong",[v._v("遇到的第一个困惑：")]),v._v(" 修改了 "),_("code",[v._v("MaterialApp")]),v._v(" 中的 "),_("code",[v._v("title")]),v._v("，但模拟器顶部的标题栏文字没有变。\n"),_("ul",[_("li",[_("strong",[v._v("原因：")]),v._v(" 您修改的是 App 的“内部名称”（用于任务切换器等），而不是页面上实际显示的标题。")]),v._v(" "),_("li",[_("strong",[v._v("解决方案：")]),v._v(" 为您指出了真正控制页面标题的代码位置，即传递给 "),_("code",[v._v("MyHomePage")]),v._v(" 组件的 "),_("code",[v._v("title")]),v._v(" 参数："),_("code",[v._v("home: const MyHomePage(title: '我的第一个App')")]),v._v("。")])])]),v._v(" "),_("li",[_("strong",[v._v("遇到的第二个困惑：")]),v._v(" 拆分组件到新文件后，出现了满屏的红线报错。\n"),_("ul",[_("li",[_("strong",[v._v("原因：")]),v._v(" 您对 "),_("code",[v._v("StatefulWidget")]),v._v(" 的标准写法不熟悉，两个类重名且 "),_("code",[v._v("createState")]),v._v(" 方法实现错误。")]),v._v(" "),_("li",[_("strong",[v._v("解决方案：")]),v._v(" 为您提供了 "),_("code",[v._v("StatefulWidget")]),v._v(" 的标准模板，解释了 Widget 类和 State 类必须分开且命名规范，"),_("code",[v._v("createState")]),v._v(" 必须准确返回 State 类的实例。")])])]),v._v(" "),_("li",[_("strong",[v._v("遇到的一个持续性干扰：")]),v._v(" VS Code 不断弹出 "),_("code",[v._v("shellsheck not installed properly")]),v._v(" 的错误。\n"),_("ul",[_("li",[_("strong",[v._v("原因：")]),v._v(" 这个问题"),_("strong",[v._v("与 Flutter 无关")]),v._v("。是您的 VS Code 中安装了一个名为 “ShellCheck” 的插件（可能是被其他插件包附带安装的），但它依赖的核心程序没有安装。")]),v._v(" "),_("li",[_("strong",[v._v("解决方案：")]),v._v(" 既然您不编写 Shell 脚本，最佳方法是在 VS Code 的**“扩展”"),_("strong",[v._v("面板中搜索并")]),v._v("卸载**这个插件，一了百了。")])])])])])]),v._v(" "),_("h2",{attrs:{id:"第四阶段-环境优化"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#第四阶段-环境优化"}},[v._v("#")]),v._v(" 第四阶段：环境优化")]),v._v(" "),_("p",[v._v("为了更好的开发体验和节省 C 盘空间，您希望自定义工具的存储位置。")]),v._v(" "),_("ol",[_("li",[_("strong",[v._v("您需要做什么：")]),v._v(" 将 "),_("strong",[v._v("Android SDK")]),v._v(" 和"),_("strong",[v._v("安卓模拟器 (AVD)")]),v._v(" 的存储位置从 C 盘移到 D 盘。\n"),_("ul",[_("li",[_("strong",[v._v("原因：")]),v._v(" C 盘空间紧张，且将开发工具统一存放更利于管理。")]),v._v(" "),_("li",[_("strong",[v._v("解决方案：")]),v._v(" "),_("ol",[_("li",[_("strong",[v._v("对于 Android SDK：")]),v._v(" 在 Android Studio 设置中重新指定 D 盘路径让其重新下载，然后更新系统的 "),_("code",[v._v("ANDROID_HOME")]),v._v(" 环境变量。")]),v._v(" "),_("li",[_("strong",[v._v("对于安卓模拟器 (AVD)：")]),v._v(" 新建一个 "),_("code",[v._v("ANDROID_AVD_HOME")]),v._v(" 环境变量指向 D 盘的新文件夹，然后将 "),_("code",[v._v("C:\\Users\\用户名\\.android\\avd")]),v._v(" 目录下的旧文件移动过去。")])])])])])])])}),[],!1,null,null,null);_.default=e.exports}}]);