<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>useRef | è´¾æ»¨æ—­çš„ä¸ªäººæŠ€æœ¯åšå®¢</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/jiabinxu-blog/R-C.png">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lxgw-wenkai-screen-webfont@1.1.0/style.css">
    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
    <meta name="description" content="å‰ç«¯å¼€å‘çŸ¥è¯†ä½“ç³»">
    <meta name="algolia-site-verification" content="8AB7B96237F774B9">
    
    <link rel="preload" href="/jiabinxu-blog/assets/css/0.styles.6e2e750c.css" as="style"><link rel="preload" href="/jiabinxu-blog/assets/js/app.f81cf313.js" as="script"><link rel="preload" href="/jiabinxu-blog/assets/js/3.bb87b8ff.js" as="script"><link rel="preload" href="/jiabinxu-blog/assets/js/2.180c3171.js" as="script"><link rel="preload" href="/jiabinxu-blog/assets/js/46.82b75b59.js" as="script"><link rel="prefetch" href="/jiabinxu-blog/assets/js/1.c3ce1b0a.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/12.3c2a6c83.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/13.3c49b8de.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/14.91b5c8e3.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/15.ef4b17e3.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/16.23f5619b.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/17.4bb3669d.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/18.664e814e.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/19.21ad7801.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/20.d4db7480.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/21.31141967.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/22.8a3f30d9.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/23.97e9a047.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/24.78676adc.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/25.3050b4ef.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/26.cd43fc60.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/27.f04bcbc6.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/28.f5223a9d.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/29.52241c93.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/30.2e981bab.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/31.d58d5448.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/32.fb28f85b.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/33.d10d4810.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/34.f89661dc.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/35.a2c20bce.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/36.e39b3fc8.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/37.edabae48.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/38.8f37da54.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/39.86e08cd4.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/4.3ff6f6b3.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/40.42a528d4.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/41.46dbe14a.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/42.0b72d4b8.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/43.7d892d86.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/44.164a4f16.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/45.5bc0d409.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/47.e959a5f5.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/48.cc983ac3.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/49.ed08971b.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/5.9cbc22ee.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/50.f9457251.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/51.63e6d8ea.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/52.51ebfdbe.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/53.2e948603.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/54.1907287a.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/55.2aca8e9e.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/56.53572a11.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/57.6c8d55a3.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/58.7c01df11.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/59.1df3a578.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/6.7cbe58bc.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/60.bf31f66a.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/61.f2feff3d.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/62.d36efdc6.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/63.824240b9.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/64.6e5633db.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/65.0bc9c8bd.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/66.b03cfd91.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/67.3a221345.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/68.23192d8d.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/69.e15e8a6b.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/7.942695b2.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/70.d4fc17a1.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/71.bdb98294.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/72.5b17ac84.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/73.3030d7e2.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/74.3329104a.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/8.c9879746.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/9.684a4798.js"><link rel="prefetch" href="/jiabinxu-blog/assets/js/vendors~docsearch.771dd409.js">
    <link rel="stylesheet" href="/jiabinxu-blog/assets/css/0.styles.6e2e750c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/jiabinxu-blog/" class="home-link router-link-active"><img src="/jiabinxu-blog/R-C.png" alt="è´¾æ»¨æ—­çš„ä¸ªäººæŠ€æœ¯åšå®¢" class="logo"> <span class="site-name can-hide">è´¾æ»¨æ—­çš„ä¸ªäººæŠ€æœ¯åšå®¢</span></a> <div class="links"><div class="search-box"><input aria-label="Search" placeholder="æœç´¢..." autocomplete="off" spellcheck="false" value="" style="background-image:url(/jiabinxu-blog/search.svg);"> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/jiabinxu-blog/Html+Css/" class="nav-link">
  Html+Css
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaScript" class="dropdown-title"><span class="title">JavaScript</span> <span class="arrow down"></span></button> <button type="button" aria-label="JavaScript" class="mobile-dropdown-title"><span class="title">JavaScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/JavaScript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/JavaScript/handwriting-code/" class="nav-link">
  å¸¸è§é¢è¯•æ‰‹å†™é¢˜
</a></li><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/JavaScript/scenario-questions/" class="nav-link">
  å¸¸è§é¢è¯•åœºæ™¯é¢˜
</a></li><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/JavaScript/javascript-core-objects/" class="nav-link">
  JavaScriptæ ¸å¿ƒå¯¹è±¡
</a></li></ul></div></div><div class="nav-item"><a href="/jiabinxu-blog/React/" class="nav-link router-link-active">
  React
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Hooks" class="dropdown-title"><span class="title">Hooks</span> <span class="arrow down"></span></button> <button type="button" aria-label="Hooks" class="mobile-dropdown-title"><span class="title">Hooks</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/React/Hooks/useState/" class="nav-link">
  useState
</a></li><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/React/Hooks/useEffect/" class="nav-link">
  useEffect
</a></li><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/React/Hooks/useRef/" class="nav-link">
  useRef
</a></li><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/React/Hooks/useContext/" class="nav-link">
  useContext
</a></li><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/React/Hooks/useMemo/" class="nav-link">
  useMemo
</a></li><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/React/Hooks/useCallback/" class="nav-link">
  useCallback
</a></li><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/React/Hooks/useMemoVSuseCallback/" class="nav-link">
  useMemoVSuseCallback
</a></li><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/React/Hooks/useReducer/" class="nav-link">
  useReducer
</a></li><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/React/Hooks/useSyncExternalStore/" class="nav-link">
  useSyncExternalStore
</a></li><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/React/Hooks/useActionState/" class="nav-link">
  useActionState
</a></li><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/React/Hooks/useOptimistic/" class="nav-link">
  useOptimistic
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="é¡¹ç›®å®æˆ˜" class="dropdown-title"><span class="title">é¡¹ç›®å®æˆ˜</span> <span class="arrow down"></span></button> <button type="button" aria-label="é¡¹ç›®å®æˆ˜" class="mobile-dropdown-title"><span class="title">é¡¹ç›®å®æˆ˜</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/project/nextjs/" class="nav-link">
  nextjs
</a></li><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/project/deploy/" class="nav-link">
  å‰ç«¯éƒ¨ç½²
</a></li><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/project/fileUpload/" class="nav-link">
  å¤§æ–‡ä»¶ä¸Šä¼ 
</a></li><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/project/macOS_Guide/" class="nav-link">
  macOSæŒ‡å—
</a></li><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/project/popular-libraries/" class="nav-link">
  å¸¸ç”¨åº“
</a></li><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/project/nextjs-i18n/" class="nav-link">
  Next.jså›½é™…åŒ–æ–¹æ¡ˆ
</a></li><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/project/nextjs-auth-refresh/" class="nav-link">
  Next.jsåŒtokenæ— æ„Ÿåˆ·æ–°
</a></li><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/project/nextjs-dir/" class="nav-link">
  Next.jsç›®å½•æ·±å…¥è§£è¯»
</a></li><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/project/flutter-config/" class="nav-link">
  flutterç¯å¢ƒé…ç½®
</a></li><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/project/flutter/" class="nav-link">
  flutter
</a></li><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/project/chrome-dev-tools/" class="nav-link">
  Chromeè°ƒè¯•å·¥å…·
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/jiabinxu-blog/Html+Css/" class="nav-link">
  Html+Css
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="JavaScript" class="dropdown-title"><span class="title">JavaScript</span> <span class="arrow down"></span></button> <button type="button" aria-label="JavaScript" class="mobile-dropdown-title"><span class="title">JavaScript</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/JavaScript/" class="nav-link">
  JavaScript
</a></li><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/JavaScript/handwriting-code/" class="nav-link">
  å¸¸è§é¢è¯•æ‰‹å†™é¢˜
</a></li><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/JavaScript/scenario-questions/" class="nav-link">
  å¸¸è§é¢è¯•åœºæ™¯é¢˜
</a></li><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/JavaScript/javascript-core-objects/" class="nav-link">
  JavaScriptæ ¸å¿ƒå¯¹è±¡
</a></li></ul></div></div><div class="nav-item"><a href="/jiabinxu-blog/React/" class="nav-link router-link-active">
  React
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Hooks" class="dropdown-title"><span class="title">Hooks</span> <span class="arrow down"></span></button> <button type="button" aria-label="Hooks" class="mobile-dropdown-title"><span class="title">Hooks</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/React/Hooks/useState/" class="nav-link">
  useState
</a></li><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/React/Hooks/useEffect/" class="nav-link">
  useEffect
</a></li><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/React/Hooks/useRef/" class="nav-link">
  useRef
</a></li><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/React/Hooks/useContext/" class="nav-link">
  useContext
</a></li><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/React/Hooks/useMemo/" class="nav-link">
  useMemo
</a></li><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/React/Hooks/useCallback/" class="nav-link">
  useCallback
</a></li><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/React/Hooks/useMemoVSuseCallback/" class="nav-link">
  useMemoVSuseCallback
</a></li><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/React/Hooks/useReducer/" class="nav-link">
  useReducer
</a></li><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/React/Hooks/useSyncExternalStore/" class="nav-link">
  useSyncExternalStore
</a></li><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/React/Hooks/useActionState/" class="nav-link">
  useActionState
</a></li><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/React/Hooks/useOptimistic/" class="nav-link">
  useOptimistic
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="é¡¹ç›®å®æˆ˜" class="dropdown-title"><span class="title">é¡¹ç›®å®æˆ˜</span> <span class="arrow down"></span></button> <button type="button" aria-label="é¡¹ç›®å®æˆ˜" class="mobile-dropdown-title"><span class="title">é¡¹ç›®å®æˆ˜</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/project/nextjs/" class="nav-link">
  nextjs
</a></li><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/project/deploy/" class="nav-link">
  å‰ç«¯éƒ¨ç½²
</a></li><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/project/fileUpload/" class="nav-link">
  å¤§æ–‡ä»¶ä¸Šä¼ 
</a></li><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/project/macOS_Guide/" class="nav-link">
  macOSæŒ‡å—
</a></li><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/project/popular-libraries/" class="nav-link">
  å¸¸ç”¨åº“
</a></li><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/project/nextjs-i18n/" class="nav-link">
  Next.jså›½é™…åŒ–æ–¹æ¡ˆ
</a></li><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/project/nextjs-auth-refresh/" class="nav-link">
  Next.jsåŒtokenæ— æ„Ÿåˆ·æ–°
</a></li><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/project/nextjs-dir/" class="nav-link">
  Next.jsç›®å½•æ·±å…¥è§£è¯»
</a></li><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/project/flutter-config/" class="nav-link">
  flutterç¯å¢ƒé…ç½®
</a></li><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/project/flutter/" class="nav-link">
  flutter
</a></li><li class="dropdown-item"><!----> <a href="/jiabinxu-blog/project/chrome-dev-tools/" class="nav-link">
  Chromeè°ƒè¯•å·¥å…·
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>useRef</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/jiabinxu-blog/React/Hooks/useRef.html#å‚è€ƒ" class="sidebar-link">å‚è€ƒ</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/jiabinxu-blog/React/Hooks/useRef.html#useref-initialvalue" class="sidebar-link">useRef(initialValue)</a></li></ul></li><li><a href="/jiabinxu-blog/React/Hooks/useRef.html#ä½¿ç”¨" class="sidebar-link">ä½¿ç”¨</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/jiabinxu-blog/React/Hooks/useRef.html#ç”¨-ref-å¼•ç”¨ä¸€ä¸ªå€¼" class="sidebar-link">ç”¨ ref å¼•ç”¨ä¸€ä¸ªå€¼</a></li><li class="sidebar-sub-header"><a href="/jiabinxu-blog/React/Hooks/useRef.html#é€šè¿‡-ref-æ“ä½œ-dom" class="sidebar-link">é€šè¿‡ ref æ“ä½œ DOM</a></li><li class="sidebar-sub-header"><a href="/jiabinxu-blog/React/Hooks/useRef.html#é¿å…é‡å¤åˆ›å»º-ref-çš„å†…å®¹" class="sidebar-link">é¿å…é‡å¤åˆ›å»º ref çš„å†…å®¹</a></li></ul></li><li><a href="/jiabinxu-blog/React/Hooks/useRef.html#ç–‘éš¾è§£ç­”" class="sidebar-link">ç–‘éš¾è§£ç­”</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/jiabinxu-blog/React/Hooks/useRef.html#æ— æ³•è·å–è‡ªå®šä¹‰ç»„ä»¶çš„-ref" class="sidebar-link">æ— æ³•è·å–è‡ªå®šä¹‰ç»„ä»¶çš„ ref</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="useref"><a href="#useref" class="header-anchor">#</a> useRef</h1> <p>useRef æ˜¯ä¸€ä¸ª React Hookï¼Œå®ƒèƒ½å¸®åŠ©å¼•ç”¨ä¸€ä¸ªä¸éœ€è¦æ¸²æŸ“çš„å€¼ã€‚</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">const</span> ref <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span>initialValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="header-anchor">#</a> å‚è€ƒ</h2> <p>åœ¨ç»„ä»¶é¡¶å±‚è°ƒç”¨ useRef ä»¥å£°æ˜ä¸€ä¸ª refã€‚</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">MyComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> intervalRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> inputRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
</code></pre></div><p><a href="#%E7%94%A8-ref-%E5%BC%95%E7%94%A8%E4%B8%80%E4%B8%AA%E5%80%BC">è¯·å‚è€ƒä¸‹æ–¹æ¡ˆä¾‹</a></p> <h3 id="useref-initialvalue"><a href="#useref-initialvalue" class="header-anchor">#</a> useRef(initialValue)</h3> <h4 id="å‚æ•°"><a href="#å‚æ•°" class="header-anchor">#</a> å‚æ•°</h4> <p>initialValueï¼šref å¯¹è±¡çš„ current å±æ€§çš„åˆå§‹å€¼ã€‚å¯ä»¥æ˜¯ä»»æ„ç±»å‹çš„å€¼ã€‚è¿™ä¸ªå‚æ•°åœ¨é¦–æ¬¡æ¸²æŸ“åè¢«å¿½ç•¥ã€‚</p> <h4 id="è¿”å›å€¼"><a href="#è¿”å›å€¼" class="header-anchor">#</a> è¿”å›å€¼</h4> <p>useRef è¿”å›ä¸€ä¸ªåªæœ‰ä¸€ä¸ªå±æ€§çš„å¯¹è±¡:</p> <ul><li>currentï¼šåˆå§‹å€¼ä¸ºä¼ é€’çš„ initialValueã€‚ä¹‹åå¯ä»¥å°†å…¶è®¾ç½®ä¸ºå…¶ä»–å€¼ã€‚å¦‚æœå°† ref å¯¹è±¡ä½œä¸ºä¸€ä¸ª JSX èŠ‚ç‚¹çš„ ref å±æ€§ä¼ é€’ç»™ Reactï¼Œref å°†ä½œä¸º current å±æ€§ã€‚
åœ¨åç»­çš„æ¸²æŸ“ä¸­ï¼ŒuseRef å°†è¿”å›åŒä¸€ä¸ªå¯¹è±¡ã€‚</li></ul> <h4 id="æ³¨æ„"><a href="#æ³¨æ„" class="header-anchor">#</a> æ³¨æ„</h4> <ul><li>å¯ä»¥ä¿®æ”¹ ref.current å±æ€§ã€‚ä¸ state ä¸åŒï¼Œå®ƒæ˜¯å¯å˜çš„ã€‚ç„¶è€Œï¼Œå¦‚æœå®ƒæŒæœ‰ä¸€ä¸ªç”¨äºæ¸²æŸ“çš„å¯¹è±¡ï¼ˆä¾‹å¦‚ state çš„ä¸€éƒ¨åˆ†ï¼‰ï¼Œé‚£ä¹ˆå°±ä¸åº”è¯¥ä¿®æ”¹è¿™ä¸ªå¯¹è±¡ã€‚</li> <li>æ”¹å˜ ref.current å±æ€§æ—¶ï¼ŒReact ä¸ä¼šé‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚React ä¸çŸ¥é“å®ƒä½•æ—¶ä¼šå‘ç”Ÿæ”¹å˜ï¼Œå› ä¸º ref æ˜¯ä¸€ä¸ªæ™®é€šçš„ JavaScript å¯¹è±¡ã€‚</li> <li>é™¤äº† åˆå§‹åŒ– å¤–ä¸è¦åœ¨æ¸²æŸ“æœŸé—´å†™å…¥æˆ–è€…è¯»å– ref.currentï¼Œå¦åˆ™ä¼šä½¿ç»„ä»¶è¡Œä¸ºå˜å¾—ä¸å¯é¢„æµ‹ã€‚</li> <li>åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼ŒReact å°†ä¼š è°ƒç”¨ä¸¤æ¬¡ç»„ä»¶æ–¹æ³•ï¼Œè¿™æ˜¯ä¸ºäº† å¸®åŠ©å‘ç°æ„å¤–é—®é¢˜ã€‚ä½†è¿™åªæ˜¯å¼€å‘æ¨¡å¼ä¸‹çš„è¡Œä¸ºï¼Œä¸ä¼šå½±å“ç”Ÿäº§æ¨¡å¼ã€‚æ¯ä¸ª ref å¯¹è±¡éƒ½å°†ä¼šåˆ›å»ºä¸¤æ¬¡ï¼Œä½†æ˜¯å…¶ä¸­ä¸€ä¸ªç‰ˆæœ¬å°†è¢«ä¸¢å¼ƒã€‚å¦‚æœä½¿ç”¨çš„æ˜¯ç»„ä»¶çº¯å‡½æ•°ï¼ˆä¹Ÿåº”å½“å¦‚æ­¤ï¼‰ï¼Œé‚£ä¹ˆè¿™ä¸ä¼šå½±å“å…¶è¡Œä¸ºã€‚</li></ul> <h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="header-anchor">#</a> ä½¿ç”¨</h2> <h3 id="ç”¨-ref-å¼•ç”¨ä¸€ä¸ªå€¼"><a href="#ç”¨-ref-å¼•ç”¨ä¸€ä¸ªå€¼" class="header-anchor">#</a> ç”¨ ref å¼•ç”¨ä¸€ä¸ªå€¼</h3> <p>åœ¨ç»„ä»¶é¡¶å±‚è°ƒç”¨ useRef å£°æ˜ä¸€ä¸ªæˆ–å¤šä¸ª refã€‚</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">Stopwatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">const</span> intervalRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ...</span>
</code></pre></div><p>useRef è¿”å›ä¸€ä¸ªå…·æœ‰å•ä¸ª current å±æ€§ çš„ ref å¯¹è±¡ï¼Œå¹¶åˆå§‹åŒ–ä¸ºä½ æä¾›çš„ åˆå§‹å€¼ã€‚</p> <p>åœ¨åç»­çš„æ¸²æŸ“ä¸­ï¼ŒuseRef å°†è¿”å›ç›¸åŒçš„å¯¹è±¡ã€‚ä½ å¯ä»¥æ”¹å˜å®ƒçš„ current å±æ€§æ¥å­˜å‚¨ä¿¡æ¯ï¼Œå¹¶åœ¨ä¹‹åè¯»å–å®ƒã€‚è¿™ä¼šè®©äººè”æƒ³åˆ° stateï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªé‡è¦çš„åŒºåˆ«ã€‚</p> <p>**æ”¹å˜ ref ä¸ä¼šè§¦å‘é‡æ–°æ¸²æŸ“ã€‚**è¿™æ„å‘³ç€ ref æ˜¯å­˜å‚¨ä¸€äº›ä¸å½±å“ç»„ä»¶è§†å›¾è¾“å‡ºä¿¡æ¯çš„å®Œç¾é€‰æ‹©ã€‚ä¾‹å¦‚ï¼Œå¦‚æœéœ€è¦å­˜å‚¨ä¸€ä¸ª interval ID å¹¶åœ¨ä»¥åæ£€ç´¢å®ƒï¼Œé‚£ä¹ˆå¯ä»¥å°†å®ƒå­˜å‚¨åœ¨ ref ä¸­ã€‚åªéœ€è¦æ‰‹åŠ¨æ”¹å˜å®ƒçš„ current å±æ€§ å³å¯ä¿®æ”¹ ref çš„å€¼ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">handleStartClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> intervalId <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  intervalRef<span class="token punctuation">.</span>current <span class="token operator">=</span> intervalId<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>åœ¨ä¹‹åï¼Œä» ref ä¸­è¯»å–
<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/setInterval" target="_blank">interval ID</a>ä¾¿å¯ä»¥ æ¸…é™¤å®šæ—¶å™¨ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">handleStopClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> intervalId <span class="token operator">=</span> intervalRef<span class="token punctuation">.</span>current<span class="token punctuation">;</span>
  <span class="token function">clearInterval</span><span class="token punctuation">(</span>intervalId<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä½¿ç”¨ ref å¯ä»¥ç¡®ä¿ï¼š</p> <ul><li>å¯ä»¥åœ¨é‡æ–°æ¸²æŸ“ä¹‹é—´ å­˜å‚¨ä¿¡æ¯ï¼ˆæ™®é€šå¯¹è±¡å­˜å‚¨çš„å€¼æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šé‡ç½®ï¼‰ã€‚</li> <li>æ”¹å˜å®ƒ ä¸ä¼šè§¦å‘é‡æ–°æ¸²æŸ“ï¼ˆçŠ¶æ€å˜é‡ä¼šè§¦å‘é‡æ–°æ¸²æŸ“ï¼‰ã€‚</li> <li>å¯¹äºç»„ä»¶çš„æ¯ä¸ªå‰¯æœ¬è€Œè¨€ï¼Œè¿™äº›ä¿¡æ¯éƒ½æ˜¯æœ¬åœ°çš„ï¼ˆå¤–éƒ¨å˜é‡åˆ™æ˜¯å…±äº«çš„ï¼‰ã€‚
æ”¹å˜ ref ä¸ä¼šè§¦å‘é‡æ–°æ¸²æŸ“ï¼Œæ‰€ä»¥ ref ä¸é€‚åˆç”¨äºå­˜å‚¨æœŸæœ›æ˜¾ç¤ºåœ¨å±å¹•ä¸Šçš„ä¿¡æ¯ã€‚å¦‚æœ‰éœ€è¦ï¼Œä½¿ç”¨ state ä»£æ›¿ã€‚
<a href="https://zh-hans.react.dev/learn/referencing-values-with-refs#differences-between-refs-and-state" target="_blank">é˜…è¯»æ›´å¤šå…³äº åœ¨ useRef å’Œ useState ä¹‹é—´é€‰æ‹© çš„ä¿¡æ¯ã€‚</a></li></ul> <h4 id="æ³¨æ„-2"><a href="#æ³¨æ„-2" class="header-anchor">#</a> æ³¨æ„</h4> <p>ä¸è¦åœ¨æ¸²æŸ“æœŸé—´å†™å…¥æˆ–è€…è¯»å– ref.currentã€‚</p> <p>React æœŸæœ›ç»„ä»¶ä¸»ä½“ è¡¨ç°å¾—åƒä¸€ä¸ªçº¯å‡½æ•°ï¼š</p> <p>å¦‚æœè¾“å…¥çš„ï¼ˆpropsã€state ä¸ ä¸Šä¸‹æ–‡ï¼‰éƒ½æ˜¯ä¸€æ ·çš„ï¼Œé‚£ä¹ˆå°±åº”è¯¥è¿”å›ä¸€æ ·çš„ JSXã€‚
ä»¥ä¸åŒçš„é¡ºåºæˆ–ç”¨ä¸åŒçš„å‚æ•°è°ƒç”¨å®ƒï¼Œä¸åº”è¯¥å½±å“å…¶ä»–è°ƒç”¨çš„ç»“æœã€‚
åœ¨ æ¸²æŸ“æœŸé—´ è¯»å–æˆ–å†™å…¥ ref ä¼šç ´åè¿™äº›é¢„æœŸè¡Œä¸ºã€‚</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">MyComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token comment">// ğŸš© ä¸è¦åœ¨æ¸²æŸ“æœŸé—´å†™å…¥ ref</span>
  myRef<span class="token punctuation">.</span>current <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
  <span class="token comment">// ğŸš© ä¸è¦åœ¨æ¸²æŸ“æœŸé—´è¯»å– ref</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>myOtherRef<span class="token punctuation">.</span>current<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å¯ä»¥åœ¨ äº‹ä»¶å¤„ç†ç¨‹åºæˆ–è€… Effect ä¸­è¯»å–å’Œå†™å…¥ refã€‚</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">MyComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// âœ… å¯ä»¥åœ¨ Effect ä¸­è¯»å–å’Œå†™å…¥ ref</span>
    myRef<span class="token punctuation">.</span>current <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
  <span class="token keyword">function</span> <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// âœ… å¯ä»¥åœ¨äº‹ä»¶å¤„ç†ç¨‹åºä¸­è¯»å–å’Œå†™å…¥ ref</span>
    <span class="token function">doSomething</span><span class="token punctuation">(</span>myOtherRef<span class="token punctuation">.</span>current<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å¦‚æœä¸å¾—ä¸åœ¨æ¸²æŸ“æœŸé—´è¯»å– æˆ–è€…å†™å…¥ï¼Œé‚£ä¹ˆåº”è¯¥ ä½¿ç”¨ state ä»£æ›¿ã€‚</p> <p>å½“æ‰“ç ´è¿™äº›è§„åˆ™æ—¶ï¼Œç»„ä»¶å¯èƒ½ä»ç„¶å¯ä»¥å·¥ä½œï¼Œä½†æ˜¯æˆ‘ä»¬<strong>ä¸º React æ·»åŠ çš„å¤§å¤šæ•°æ–°åŠŸèƒ½å°†ä¾èµ–äºè¿™äº›é¢„æœŸè¡Œä¸º</strong>ã€‚é˜…è¯»
<a href="https://zh-hans.react.dev/learn/keeping-components-pure#where-you-_can_-cause-side-effects" target="_blank">ä¿æŒç»„ä»¶çº¯ç²¹</a>ä»¥äº†è§£æ›´å¤šä¿¡æ¯ã€‚</p> <h3 id="é€šè¿‡-ref-æ“ä½œ-dom"><a href="#é€šè¿‡-ref-æ“ä½œ-dom" class="header-anchor">#</a> é€šè¿‡ ref æ“ä½œ DOM</h3> <p>ä½¿ç”¨ ref æ“ä½œ DOM æ˜¯éå¸¸å¸¸è§çš„è¡Œä¸ºã€‚React å†…ç½®äº†å¯¹å®ƒçš„æ”¯æŒã€‚</p> <p>é¦–å…ˆï¼Œå£°æ˜ä¸€ä¸ª åˆå§‹å€¼ ä¸º null çš„ ref å¯¹è±¡</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">MyComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> inputRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
</code></pre></div><p>ç„¶åå°† ref å¯¹è±¡ä½œä¸º ref å±æ€§ä¼ é€’ç»™æƒ³è¦æ“ä½œçš„ DOM èŠ‚ç‚¹çš„ JSXï¼š</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token comment">// ...</span>
<span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>inputRef<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">;</span>
</code></pre></div><p>å½“ React åˆ›å»º DOM èŠ‚ç‚¹å¹¶å°†å…¶æ¸²æŸ“åˆ°å±å¹•æ—¶ï¼ŒReact å°†ä¼šæŠŠ DOM èŠ‚ç‚¹è®¾ç½®ä¸º ref å¯¹è±¡çš„ current å±æ€§ã€‚ç°åœ¨å¯ä»¥å€ŸåŠ© ref å¯¹è±¡è®¿é—® input çš„ DOM èŠ‚ç‚¹ï¼Œå¹¶ä¸”å¯ä»¥è°ƒç”¨ç±»ä¼¼äº focus() çš„æ–¹æ³•ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  inputRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å½“èŠ‚ç‚¹ä»å±å¹•ä¸Šç§»é™¤æ—¶ï¼ŒReact å°†æŠŠ current å±æ€§è®¾ç½®å› nullã€‚</p> <h4 id="æ¡ˆä¾‹"><a href="#æ¡ˆä¾‹" class="header-anchor">#</a> æ¡ˆä¾‹</h4> <p>æœ‰æ—¶ä½ å¯èƒ½æƒ³è®©çˆ¶ç»„ä»¶åœ¨ç»„ä»¶ä¸­æ“çºµ DOMã€‚ä¾‹å¦‚ï¼Œå‡è®¾æ­£åœ¨ç¼–å†™ä¸€ä¸ª MyInput ç»„ä»¶ï¼Œä½†å¸Œæœ›çˆ¶ç»„ä»¶èƒ½å¤Ÿèšç„¦ inputï¼ˆä¸è¿‡çˆ¶ç»„ä»¶æ— æ³•è®¿é—®ï¼‰ã€‚æ­¤æ—¶å¯ä»¥åœ¨çˆ¶ç»„ä»¶ä¸­åˆ›å»ºä¸€ä¸ª ref å¹¶ä½œä¸º prop ä¼ é€’ç»™å­ç»„ä»¶ã€‚</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">MyInput</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> ref <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>ref<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Form</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> inputRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">function</span> <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    inputRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MyInput</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>inputRef<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleClick<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">èšç„¦è¾“å…¥æ¡†</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="é¿å…é‡å¤åˆ›å»º-ref-çš„å†…å®¹"><a href="#é¿å…é‡å¤åˆ›å»º-ref-çš„å†…å®¹" class="header-anchor">#</a> é¿å…é‡å¤åˆ›å»º ref çš„å†…å®¹</h3> <p>React ä¼šä¿å­˜ ref åˆå§‹å€¼ï¼Œå¹¶åœ¨åç»­çš„æ¸²æŸ“ä¸­å¿½ç•¥å®ƒã€‚</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">Video</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> playerRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">VideoPlayer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
</code></pre></div><p>è™½ç„¶ new VideoPlayer() çš„ç»“æœåªä¼šåœ¨é¦–æ¬¡æ¸²æŸ“æ—¶ä½¿ç”¨ï¼Œä½†æ˜¯ä¾ç„¶åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶éƒ½åœ¨è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚å¦‚æœæ˜¯åˆ›å»ºæ˜‚è´µçš„å¯¹è±¡ï¼Œè¿™å¯èƒ½æ˜¯ä¸€ç§æµªè´¹ã€‚</p> <p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½ å¯ä»¥åƒè¿™æ ·åˆå§‹åŒ– refï¼š</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">Video</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> playerRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>playerRef<span class="token punctuation">.</span>current <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    playerRef<span class="token punctuation">.</span>current <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VideoPlayer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ...</span>
</code></pre></div><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œåœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­å†™å…¥æˆ–è¯»å– ref.current æ˜¯ä¸å…è®¸çš„ã€‚ç„¶è€Œï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹æ˜¯å¯ä»¥çš„ï¼Œå› ä¸ºç»“æœæ€»æ˜¯ä¸€æ ·çš„ï¼Œè€Œä¸”æ¡ä»¶åªåœ¨åˆå§‹åŒ–æ—¶æ‰§è¡Œï¼Œæ‰€ä»¥æ˜¯å®Œå…¨å¯é¢„æµ‹çš„ã€‚</p> <h2 id="ç–‘éš¾è§£ç­”"><a href="#ç–‘éš¾è§£ç­”" class="header-anchor">#</a> ç–‘éš¾è§£ç­”</h2> <h3 id="æ— æ³•è·å–è‡ªå®šä¹‰ç»„ä»¶çš„-ref"><a href="#æ— æ³•è·å–è‡ªå®šä¹‰ç»„ä»¶çš„-ref" class="header-anchor">#</a> æ— æ³•è·å–è‡ªå®šä¹‰ç»„ä»¶çš„ ref</h3> <p>å¦‚æœå°è¯•åƒè¿™æ ·ä¼ é€’ ref åˆ°è‡ªå®šä¹‰ç»„ä»¶ï¼š</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">const</span> inputRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MyInput</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>inputRef<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">;</span>
</code></pre></div><p>ä½ å¯èƒ½ä¼šåœ¨æ§åˆ¶å°ä¸­å¾—åˆ°è¿™æ ·çš„é”™è¯¯ï¼š</p> <div class="language- extra-class"><pre class="language-text"><code>Console
TypeError: Cannot read properties of null
</code></pre></div><p>é»˜è®¤æƒ…å†µä¸‹ï¼Œè‡ªå®šä¹‰ç»„ä»¶ä¸ä¼šæš´éœ²å®ƒä»¬å†…éƒ¨ DOM èŠ‚ç‚¹çš„ refã€‚</p> <p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œé¦–å…ˆï¼Œæ‰¾åˆ°æƒ³è·å¾— ref çš„ç»„ä»¶ï¼š</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">MyInput</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> value<span class="token punctuation">,</span> onChange <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span></span> <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onChange<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç„¶ååœ¨ç»„ä»¶çš„ props å‚æ•°ä¸­æå– refï¼Œå¹¶å°†å®ƒä½œä¸ºå‚æ•°ä¼ é€’ç»™ç›¸å…³çš„ å†…ç½®ç»„ä»¶ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">function</span> <span class="token function">MyInput</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> value<span class="token punctuation">,</span> onChange<span class="token punctuation">,</span> ref <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>value<span class="token punctuation">}</span></span> <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onChange<span class="token punctuation">}</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>ref<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> MyInput<span class="token punctuation">;</span>
</code></pre></div><p>æœ€åï¼Œçˆ¶çº§ç»„ä»¶å°±å¯ä»¥å¾—åˆ°å®ƒçš„ refã€‚</p> <p>é˜…è¯» <a href="https://zh-hans.react.dev/learn/manipulating-the-dom-with-refs#accessing-another-components-dom-nodes" target="_blank">è®¿é—®å¦ä¸€ä¸ªç»„ä»¶çš„ DOM èŠ‚ç‚¹</a>ä»¥äº†è§£æ›´å¤šä¿¡æ¯ã€‚</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/jiabinxu-blog/assets/js/app.f81cf313.js" defer></script><script src="/jiabinxu-blog/assets/js/3.bb87b8ff.js" defer></script><script src="/jiabinxu-blog/assets/js/2.180c3171.js" defer></script><script src="/jiabinxu-blog/assets/js/46.82b75b59.js" defer></script>
  </body>
</html>
